<!DOCTYPE html>
<html>
<head>
    <title>ü§ñ Autonomous Development Monitor</title>
    <style>
        body { 
            font-family: 'Courier New', monospace; 
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2a 100%);
            color: #00ff41; 
            padding: 20px;
            min-height: 100vh;
        }
        .header {
            text-align: center;
            padding: 20px;
            border-bottom: 2px solid #00ff41;
            margin-bottom: 30px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .card {
            background: rgba(0, 20, 40, 0.7);
            border: 1px solid #00ff41;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
        }
        .card h3 {
            color: #00ff41;
            margin-top: 0;
            border-bottom: 1px solid #00ff41;
            padding-bottom: 10px;
        }
        .stat {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 5px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
        }
        .stat-value {
            color: #ffff00;
            font-weight: bold;
        }
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #111;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
            border: 1px solid #00ff41;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff41, #00aa41);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-weight: bold;
        }
        button {
            padding: 12px 24px;
            font-size: 14px;
            margin: 5px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            font-family: monospace;
            transition: all 0.3s;
        }
        .btn-primary {
            background: #00ff41;
            color: #000;
            font-weight: bold;
        }
        .btn-danger {
            background: #ff4444;
            color: white;
        }
        .btn-warning {
            background: #ffaa00;
            color: #000;
        }
        button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px currentColor;
        }
        .logs {
            max-height: 400px;
            overflow-y: auto;
            background: #000;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #00ff41;
        }
        .log-entry {
            margin: 5px 0;
            padding: 8px;
            border-left: 3px solid #00ff41;
            background: rgba(0, 255, 65, 0.05);
        }
        .status-active {
            color: #00ff41;
            animation: pulse 2s infinite;
        }
        .status-stopped {
            color: #ff4444;
        }
        .status-complete {
            color: #00aaff;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .countdown {
            font-size: 24px;
            text-align: center;
            margin: 20px 0;
            color: #ffff00;
        }
        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            animation: slideIn 0.5s ease;
        }
        .alert-success {
            background: rgba(0, 255, 65, 0.2);
            border: 1px solid #00ff41;
            color: #00ff41;
        }
        .alert-error {
            background: rgba(255, 68, 68, 0.2);
            border: 1px solid #ff4444;
            color: #ff4444;
        }
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ü§ñ AUTONOMOUS BLOCKCHAIN DEVELOPMENT MONITOR</h1>
        <p>Self-sustaining system generating 4500 components without interruption</p>
    </div>

    <div id="alerts"></div>

    <div class="grid">
        <div class="card">
            <h3>üìä Development Progress</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar">0%</div>
            </div>
            <div class="stat">
                <span>Components</span>
                <span class="stat-value" id="componentsCount">0 / 4500</span>
            </div>
            <div class="stat">
                <span>Current Phase</span>
                <span class="stat-value" id="currentPhase">Phase 1</span>
            </div>
            <div class="stat">
                <span>Lines of Code</span>
                <span class="stat-value" id="linesOfCode">0</span>
            </div>
            <div class="stat">
                <span>Commits</span>
                <span class="stat-value" id="commits">0</span>
            </div>
        </div>

        <div class="card">
            <h3>‚ö° System Status</h3>
            <div class="stat">
                <span>Status</span>
                <span class="stat-value" id="systemStatus">üîç Checking...</span>
            </div>
            <div class="stat">
                <span>Next Update</span>
                <span class="stat-value" id="nextUpdate">--</span>
            </div>
            <div class="stat">
                <span>Est. Completion</span>
                <span class="stat-value" id="estCompletion">--</span>
            </div>
            <div class="stat">
                <span>Uptime</span>
                <span class="stat-value" id="uptime">--</span>
            </div>
            <div class="countdown" id="countdown"></div>
        </div>
    </div>

    <div class="card">
        <h3>üéÆ Control Panel</h3>
        <button class="btn-primary" onclick="checkStatus()">üîÑ Refresh Status</button>
        <button class="btn-warning" onclick="forceDevelopment()">‚ö° Force Next Component</button>
        <button class="btn-danger" onclick="if(confirm('Reset all progress?')) resetDevelopment()">üîÑ Reset Development</button>
        <button class="btn-primary" onclick="downloadLogs()">üì• Download Logs</button>
        <button class="btn-warning" onclick="speedTest()">üèÉ Speed Test</button>
    </div>

    <div class="card">
        <h3>üìù Recent Development Logs</h3>
        <div class="logs" id="logsContainer">
            <div style="text-align: center; color: #666;">Loading logs...</div>
        </div>
    </div>

    <script>
        let autoRefresh = true
        let refreshInterval = null
        let countdownInterval = null
        let lastProgress = null

        async function checkStatus() {
            try {
                showAlert('üîç Fetching latest status...', 'success', 2000)
                
                // Fetch progress and status in parallel
                const [progressRes, statusRes, logsRes] = await Promise.all([
                    fetch('https://kryptterminal.com/api/progress'),
                    fetch('https://kryptterminal.com/api/development/status').catch(() => null),
                    fetch('https://kryptterminal.com/api/logs?limit=20')
                ])

                const progress = await progressRes.json()
                const status = statusRes ? await statusRes.json() : null
                const logs = await logsRes.json()

                // Update progress
                updateProgress(progress)
                
                // Update status
                if (status) {
                    updateSystemStatus(status)
                }
                
                // Update logs
                updateLogs(logs)
                
                // Check for completion
                if (progress.componentsCompleted >= 4500) {
                    showAlert('üéâ ALL 4500 COMPONENTS COMPLETED!', 'success')
                    document.getElementById('systemStatus').innerHTML = '<span class="status-complete">‚úÖ COMPLETE</span>'
                }
                
                lastProgress = progress

            } catch (error) {
                showAlert(`‚ùå Error: ${error.message}`, 'error')
                console.error('Status check error:', error)
            }
        }

        function updateProgress(progress) {
            const percent = ((progress.componentsCompleted || 0) / 4500 * 100).toFixed(2)
            document.getElementById('progressBar').style.width = percent + '%'
            document.getElementById('progressBar').textContent = percent + '%'
            document.getElementById('componentsCount').textContent = `${progress.componentsCompleted || 0} / 4500`
            document.getElementById('currentPhase').textContent = `Phase ${progress.currentPhase || 1}`
            document.getElementById('linesOfCode').textContent = (progress.linesOfCode || 0).toLocaleString()
            document.getElementById('commits').textContent = (progress.commits || 0).toLocaleString()
        }

        function updateSystemStatus(status) {
            // Update status indicator
            const statusEl = document.getElementById('systemStatus')
            if (status.isRunning) {
                statusEl.innerHTML = '<span class="status-active">üü¢ ACTIVE</span>'
            } else {
                statusEl.innerHTML = '<span class="status-stopped">üî¥ STOPPED</span>'
            }
            
            // Update next update timer
            if (status.nextUpdateIn > 0) {
                document.getElementById('nextUpdate').textContent = `${status.nextUpdateIn}s`
                startCountdown(status.nextUpdateIn)
            } else {
                document.getElementById('nextUpdate').textContent = 'Now'
            }
            
            // Update estimated completion
            if (status.estimatedCompletion) {
                const est = new Date(status.estimatedCompletion)
                document.getElementById('estCompletion').textContent = est.toLocaleString()
            }
            
            // Calculate uptime
            if (status.lastUpdated) {
                const start = new Date(status.lastUpdated)
                const now = new Date()
                const diff = now - start
                const hours = Math.floor(diff / 3600000)
                const minutes = Math.floor((diff % 3600000) / 60000)
                document.getElementById('uptime').textContent = `${hours}h ${minutes}m`
            }
        }

        function updateLogs(logs) {
            const container = document.getElementById('logsContainer')
            if (logs.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #666;">No logs yet...</div>'
                return
            }
            
            container.innerHTML = logs.slice(-20).reverse().map(log => {
                const time = new Date(log.timestamp).toLocaleTimeString()
                const typeColor = {
                    'code': '#00ff41',
                    'commit': '#00aaff',
                    'test': '#ffaa00',
                    'phase': '#ff00ff',
                    'system': '#ffffff'
                }[log.type] || '#00ff41'
                
                return `
                    <div class="log-entry" style="border-left-color: ${typeColor}">
                        <small style="color: #666">${time}</small><br>
                        <strong style="color: ${typeColor}">${log.type?.toUpperCase()}:</strong> ${log.message}
                        ${log.details?.snippet ? `<pre style="margin: 5px 0; color: #888; font-size: 10px;">${log.details.snippet.substring(0, 100)}...</pre>` : ''}
                    </div>
                `
            }).join('')
        }

        function startCountdown(seconds) {
            if (countdownInterval) clearInterval(countdownInterval)
            
            let remaining = seconds
            countdownInterval = setInterval(() => {
                remaining--
                if (remaining <= 0) {
                    clearInterval(countdownInterval)
                    document.getElementById('countdown').textContent = 'üöÄ Generating component...'
                    setTimeout(checkStatus, 1000)
                } else {
                    document.getElementById('countdown').textContent = `Next component in ${remaining} seconds`
                }
            }, 1000)
        }

        async function forceDevelopment() {
            try {
                showAlert('‚ö° Forcing component generation...', 'success', 2000)
                
                const response = await fetch('https://kryptterminal.com/api/development/force', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                })
                
                const result = await response.json()
                
                if (result.success) {
                    showAlert(`‚úÖ Generated: ${result.component}`, 'success')
                    setTimeout(checkStatus, 1000)
                } else {
                    showAlert(`‚ùå ${result.message || 'Generation failed'}`, 'error')
                }
                
            } catch (error) {
                showAlert(`‚ùå Error: ${error.message}`, 'error')
            }
        }

        async function resetDevelopment() {
            try {
                const response = await fetch('https://kryptterminal.com/api/development/reset', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                })
                
                const result = await response.json()
                
                if (result.success) {
                    showAlert('üîÑ Development reset successfully', 'success')
                    setTimeout(checkStatus, 1000)
                } else {
                    showAlert('‚ùå Reset failed', 'error')
                }
                
            } catch (error) {
                showAlert(`‚ùå Error: ${error.message}`, 'error')
            }
        }

        async function downloadLogs() {
            try {
                const response = await fetch('https://kryptterminal.com/api/logs?limit=10000')
                const logs = await response.json()
                
                const content = JSON.stringify(logs, null, 2)
                const blob = new Blob([content], { type: 'application/json' })
                const url = URL.createObjectURL(blob)
                const a = document.createElement('a')
                a.href = url
                a.download = `krypt-logs-${new Date().toISOString()}.json`
                a.click()
                
                showAlert(`üì• Downloaded ${logs.length} logs`, 'success')
                
            } catch (error) {
                showAlert(`‚ùå Download failed: ${error.message}`, 'error')
            }
        }

        async function speedTest() {
            showAlert('üèÉ Running speed test...', 'success', 2000)
            
            const startTime = Date.now()
            let successCount = 0
            
            for (let i = 0; i < 5; i++) {
                try {
                    const res = await fetch('https://kryptterminal.com/api/development/force', {
                        method: 'POST'
                    })
                    if (res.ok) successCount++
                    await new Promise(r => setTimeout(r, 1000))
                } catch (e) {}
            }
            
            const elapsed = (Date.now() - startTime) / 1000
            showAlert(`‚ö° Speed test: ${successCount}/5 components in ${elapsed.toFixed(1)}s`, 'success')
            setTimeout(checkStatus, 1000)
        }

        function showAlert(message, type = 'success', duration = 5000) {
            const alertDiv = document.createElement('div')
            alertDiv.className = `alert alert-${type}`
            alertDiv.textContent = message
            
            const container = document.getElementById('alerts')
            container.appendChild(alertDiv)
            
            setTimeout(() => {
                alertDiv.style.opacity = '0'
                setTimeout(() => alertDiv.remove(), 500)
            }, duration)
        }

        // Start auto-refresh
        function startAutoRefresh() {
            checkStatus()
            refreshInterval = setInterval(checkStatus, 15000) // Check every 15 seconds
        }

        // Initialize
        window.onload = function() {
            startAutoRefresh()
        }
    </script>
</body>
</html>