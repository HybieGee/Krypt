<!DOCTYPE html>
<html>
<head>
    <title>Debug Progress Issue</title>
    <style>
        body { background: black; color: #00ff00; font-family: monospace; padding: 20px; }
        .info { background: #001100; padding: 10px; margin: 10px 0; border: 1px solid #00ff00; }
        button { background: #001100; border: 1px solid #00ff00; color: #00ff00; padding: 10px; margin: 5px; }
    </style>
</head>
<body>
    <h1>üîç Krypt Terminal Progress Debugger</h1>
    
    <button onclick="checkProgress()">üìä Check Progress</button>
    <button onclick="clearWalletData()">üßπ Clear Wallet Data</button>
    <button onclick="startMonitoring()">üëÅÔ∏è Start Monitoring</button>
    <button onclick="stopMonitoring()">‚èπÔ∏è Stop Monitoring</button>
    
    <div id="output"></div>

    <script>
        let monitoring = false;
        let monitorInterval = null;

        async function checkProgress() {
            try {
                const [progress, stats] = await Promise.all([
                    fetch('https://kryptterminal.com/api/progress').then(r => r.json()),
                    fetch('https://kryptterminal.com/api/stats').then(r => r.json())
                ]);
                
                const output = document.getElementById('output');
                output.innerHTML = `
                    <div class="info">
                        <strong>üìä Progress Status:</strong><br>
                        Components: ${progress.componentsCompleted} / ${progress.totalComponents}<br>
                        Phase: ${progress.currentPhase}<br>
                        Percent: ${progress.percentComplete.toFixed(2)}%<br>
                        Last Updated: ${new Date(progress.lastUpdated).toLocaleString()}<br>
                        <br>
                        <strong>üìà Stats:</strong><br>
                        Early Access Users: ${stats.early_access_users.value}<br>
                        Components (Stats): ${stats.components_completed.value}<br>
                        <br>
                        <strong>üïê Timestamp Info:</strong><br>
                        Current Time: ${new Date().toLocaleString()}<br>
                        Progress Timestamp: ${progress.lastUpdated}<br>
                        Time Diff: ${Date.now() - progress.lastUpdated}ms<br>
                    </div>
                `;
            } catch (error) {
                document.getElementById('output').innerHTML = `<div class="info" style="color: red;">Error: ${error.message}</div>`;
            }
        }

        function clearWalletData() {
            localStorage.clear();
            sessionStorage.clear();
            alert('‚úÖ Browser data cleared! Refresh kryptterminal.com');
        }

        function startMonitoring() {
            if (monitoring) return;
            monitoring = true;
            monitorInterval = setInterval(checkProgress, 2000);
            document.getElementById('output').innerHTML = '<div class="info">üîÑ Monitoring started... (every 2 seconds)</div>';
        }

        function stopMonitoring() {
            monitoring = false;
            if (monitorInterval) {
                clearInterval(monitorInterval);
                monitorInterval = null;
            }
            document.getElementById('output').innerHTML = '<div class="info">‚èπÔ∏è Monitoring stopped</div>';
        }

        // Auto-check on load
        checkProgress();
    </script>
</body>
</html>