<!DOCTYPE html>
<html>
<head>
    <title>Frontend Terminal Reset</title>
</head>
<body>
    <h1>üîß Reset Frontend Terminal Cache</h1>
    <p>This will clear all frontend caches and force refresh of logs.</p>
    
    <button onclick="clearEverything()">üßπ Clear All Caches & Force Refresh</button>
    <button onclick="testAPI()">üß™ Test API Connection</button>
    
    <div id="status"></div>
    <div id="apiTest"></div>
    
    <script>
        function clearEverything() {
            document.getElementById('status').innerHTML = '<h3>üßπ Clearing all caches...</h3>'
            
            // Clear all possible storage
            try {
                localStorage.clear()
                sessionStorage.clear()
                
                // Clear specific krypt storage
                localStorage.removeItem('krypt-terminal-storage')
                
                // Clear cookies
                document.cookie.split(";").forEach(function(c) { 
                    document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); 
                });
                
                // Clear service worker cache if exists
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.getRegistrations().then(function(registrations) {
                        for(let registration of registrations) {
                            registration.unregister();
                        }
                    });
                }
                
                // Clear browser cache
                if ('caches' in window) {
                    caches.keys().then(function(names) {
                        names.forEach(name => {
                            caches.delete(name);
                        });
                    });
                }
                
                document.getElementById('status').innerHTML = `
                    <div style="color: green;">
                        ‚úÖ All caches cleared!<br>
                        üîÑ Refresh your kryptterminal.com page now<br>
                        ‚ö° Terminal should show real blockchain development
                    </div>
                `
                
                // Auto redirect after 3 seconds
                setTimeout(() => {
                    window.location.href = 'https://kryptterminal.com'
                }, 3000)
                
            } catch (error) {
                document.getElementById('status').innerHTML = `
                    <div style="color: red;">‚ùå Error: ${error.message}</div>
                `
            }
        }
        
        async function testAPI() {
            document.getElementById('apiTest').innerHTML = '<h3>üß™ Testing API...</h3>'
            
            try {
                // Test APIs
                const [progressRes, logsRes] = await Promise.all([
                    fetch('https://kryptterminal.com/api/progress'),
                    fetch('https://kryptterminal.com/api/logs?limit=5')
                ])
                
                const progress = await progressRes.json()
                const logs = await logsRes.json()
                
                document.getElementById('apiTest').innerHTML = `
                    <div style="color: green;">
                        <h3>‚úÖ API Status: WORKING</h3>
                        <p><strong>Progress:</strong> ${progress.componentsCompleted}/${progress.totalComponents} components</p>
                        <p><strong>Recent Logs:</strong> ${logs.length} available</p>
                        <div style="background: #f5f5f5; padding: 10px; max-height: 200px; overflow-y: auto;">
                            ${logs.slice(0, 3).map(log => `
                                <div style="margin-bottom: 10px;">
                                    <strong>[${new Date(log.timestamp).toLocaleTimeString()}]</strong>
                                    ${log.message}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `
                
            } catch (error) {
                document.getElementById('apiTest').innerHTML = `
                    <div style="color: red;">
                        ‚ùå API Error: ${error.message}<br>
                        Check your internet connection
                    </div>
                `
            }
        }
        
        // Auto test on load
        window.onload = function() {
            testAPI()
        }
    </script>
</body>
</html>